(function () {
  function detectLang() {
    try {
      const saved = localStorage.getItem("beLang");
      if (saved === "en" || saved === "zh") return saved;
    } catch {}
    const nav = navigator.language || navigator.userLanguage || "en";
    return nav.toLowerCase().startsWith("zh") ? "zh" : "en";
  }

  const dict = {
    zh: {
      "offline-page-title": "BlackEagle — 离线 ZIP 安装教程",
      "offline-meta-description": "在 Chrome / Edge 中通过 ZIP 包离线安装 BlackEagle 扩展的步骤说明。",
      "page-title": "BlackEagle — 你的私人 AI 浏览器",
      "meta-description": "BlackEagle 浏览器插件：免费、纯本地、无需服务器、隐私优先。让 AI 像人一样使用浏览器，理解网页并自动完成操作。",
      "nav-features": "特色",
      "nav-scenes": "场景",
      "nav-download": "下载",
      "hero-title": "你的私人 AI 浏览器",
      "hero-sub": "免费 · 纯本地 · 无需服务器 · 隐私优先",
      "hero-desc": "让 AI 像人一样使用浏览器，理解网页、执行操作。安装即拥有一台个人化的 AI 浏览器。",
      "cta-chrome": "下载 Chrome 版",
      "cta-edge": "下载 Edge 版",
      "badge-1": "Local-first",
      "badge-2": "多模型接入",
      "badge-3": "多模态理解",
      "features-title": "核心特色",
      "features-local-title": "纯本地运行",
      "features-local-desc": "网页内容与操作不经第三方中转，数据只在你手里。",
      "features-free-title": "免费，开箱即用",
      "features-free-desc": "安装即可使用基础能力，验证真实场景与价值。",
      "features-noserver-title": "无需服务器",
      "features-noserver-desc": "不搭后端、不写爬虫，AI 直接在浏览器完成任务。",
      "features-model-title": "自配模型",
      "features-model-desc": "接入你自己的 LLM Endpoint + API Key，灵活低成本。",
      "features-ops-title": "理解与操作",
      "features-ops-desc": "读取网页与选中内容，自动点击、填写、跳转，多步骤流程一站完成。",
      "features-multimodal-title": "多模态支持",
      "features-multimodal-desc": "视频、图片、文档内容自动理解与提炼，生成结构化结果。",
      "scenes-title": "适用场景",
      "scenes-research-title": "市场调研",
      "scenes-research-desc": "自动打开网站并提取关键信息，竞品价格、功能、公告一键汇总。",
      "scenes-content-title": "内容创作",
      "scenes-content-desc": "读取参考文章生成原创，多网页合成深度稿，视频图文自动拆解。",
      "scenes-commerce-title": "电商与运营",
      "scenes-commerce-desc": "分析评论、对比竞品、自动发布；你能点的网页，AI 都能替你点。",
      "download-title": "下载与安装",
      "download-desc": "BlackEagle 支持 Chrome 与 Edge。当前版本提供 GitHub Releases 下载。",
      "chrome-setup-title": "Chrome 安装：",
      "chrome-step1": "打开 chrome://extensions 并开启「开发者模式」。",
      "chrome-step2": "点击「加载已解压的扩展程序」，选择插件解压后的文件夹。",
      "edge-setup-title": "Edge 安装：",
      "edge-step1": "打开 edge://extensions 并开启「开发人员模式」。",
      "edge-step2": "点击「加载已解压的扩展」，选择插件解压后的文件夹。",
      tips: "提示：建议优先使用你自己的 LLM Endpoint + API Key，获得更快、更安全、更个性化的体验。",
      toggle: "EN",
      "download-cta-chrome": "下载 Chrome 版",
      "download-cta-edge": "下载 Edge 版",
      "download-offline-zip": "离线安装教程 (ZIP)",
      "footer-feedback": "GitHub 反馈",
      "footer-tutorial": "配置教程",
      "footer-feature": "功能演示",
      "feature-hero-title": "网页表单自动解读与填写",
      "feature-hero-desc": "BlackEagle 读取网页语义与字段结构，自动完成点击、填写、跳转等多步骤表单流程。",
      "feature-video-title": "自动填写与操作网页",
      "feature-video-desc": "展示表单自动理解与自动填写：识别字段语义、校验约束并按步骤完成填写与提交。",
      "feature-video2-title": "网页难懂内容自动解读",
      "feature-video2-desc": "帮助你解释网页中的晦涩与专业内容，提炼要点与行动建议。",
      "feature-video3-title": "自动生成文章并导出",
      "feature-video3-desc": "基于网页内容撰写文章，自动整理并导出为文档，方便二次编辑与分享。",
      "feature-video4-title": "本地超大 PDF 总结",
      "feature-video4-desc": "在本地解析并总结超大 PDF，快速提炼要点与结论，保护隐私不出机。",
      "feature-video5-title": "本地/网页视频读取与总结",
      "feature-video5-desc": "支持读取本地视频文件或网页中的在线视频，提取要点、读取字幕，并可直接生成文章。",
      "feature-video6-title": "读取与处理邮件",
      "feature-video6-desc": "自动读取你的邮件内容，识别并处理任务；支持解析邮件中的图片与资源，生成回复或总结。",
      "feature-video7-title": "选中网页内容并解读",
      "feature-video7-desc": "在目标网页中选中内容，AI 即时解读、提炼要点，可继续生成总结与行动建议。",
      "feature-video8-title": "任务提醒与待办系统",
      "feature-video8-desc": "自定义任务提醒，在你工作时帮你记事，到时自动提醒；可结合网页操作与内容解读。",
      "feature-video9-title": "网页内容一键变成图片",
      "feature-video9-desc": "基于网页内容语义生成四格漫画、插画或多风格图片（非截图，演示视频即将上线）。",
      "feature-steps-title": "操作步骤",
      "feature-step1": "在目标网页打开插件侧边栏，选择『读取页面』。",
      "feature-step2": "选中或指定表单区域与字段，让 AI 识别字段含义与约束。",
      "feature-step3": "在对话中描述要填写的内容或从文档/数据中导入，执行『自动填写』。",
      "feature-step4": "如需多步骤流程（登录、跳转、提交），使用工作流依次执行点击与表单提交。",
      "feature-tips-title": "提示",
      "feature-tips-desc": "复杂表单建议分步执行；必要时为关键元素添加标记，提升识别准确度。",
      "nav-home": "返回首页",
      "offline-footer-home": "返回首页",
      "tutorial-hero-title": "DeepSeek 基础配置教程",
      "tutorial-hero-desc": "按照下面步骤，完成 API Key 申请与在 BlackEagle 的基础对话配置。",
      "tutorial-apply-title": "一、申请 DeepSeek API Key",
      "tutorial-apply-step1": "访问 DeepSeek 官网（开发者门户），注册并登录账号。",
      "tutorial-apply-step2": "打开『API Keys』页面，点击新建，生成一个 API Key。",
      "tutorial-apply-step3": "复制并妥善保存该 Key，用于 BlackEagle 的模型配置。",
      "tutorial-endpoint-title": "常用 Endpoint 示例",
      "tutorial-endpoint-desc": "例如：https://api.deepseek.com/v1（具体以官方文档为准）",
      "tutorial-config-title": "二、在 BlackEagle 中进行配置",
      "tutorial-config-step1": "打开插件侧边栏，进入『设置 / 模型配置』页面。",
      "tutorial-config-step2": "填写 Endpoint、选择模型（如 deepseek-chat），粘贴 API Key。",
      "tutorial-config-step3": "保存后，在对话框输入『Hello』进行测试。",
      "tutorial-faq-title": "常见问题",
      "tutorial-faq-1": "无法连接？请检查 Endpoint、Key 以及网络代理限制。",
      "tutorial-faq-2": "模型返回慢？尝试降低温度、选择更快的模型，或优化提示词。",
      "tutorial-back-home": "返回首页",
      "offline-hero-title": "Chrome / Edge 离线安装教程（ZIP 包）",
      "offline-hero-desc": "无需商店，直接下载 BlackEagle.zip 解压并在浏览器加载已解压的扩展。",
      "offline-cta-download": "下载 BlackEagle.zip",
      "offline-cta-back": "返回首页",
      "offline-chrome-title": "Chrome 安装步骤（ZIP）",
      "offline-chrome-step1": "下载并解压 BlackEagle.zip 到任意本地文件夹。",
      "offline-chrome-step2": "在地址栏输入 chrome://extensions，开启「开发者模式」。",
      "offline-chrome-step3": "点击「加载已解压的扩展程序」，选择刚解压的文件夹。",
      "offline-chrome-step4": "加载成功后，固定 BlackEagle 图标到浏览器工具栏即可使用。",
      "offline-chrome-update-title": "更新到新版本",
      "offline-chrome-update-desc": "下载新 ZIP，解压到新文件夹，在扩展页点击「移除」旧版本，再重新「加载已解压的扩展程序」。",
      "offline-edge-title": "Edge 安装步骤（ZIP）",
      "offline-edge-step1": "下载并解压 BlackEagle.zip。",
      "offline-edge-step2": "在地址栏输入 edge://extensions，开启「开发人员模式」。",
      "offline-edge-step3": "点击「加载已解压的扩展」，选择解压后的文件夹。",
      "offline-edge-step4": "安装完成后，可在工具栏固定 BlackEagle 以便快速使用。",
      "offline-edge-faq-title": "常见问题",
      "offline-edge-faq-1": "提示无法加载？确认选择的是解压后的文件夹根目录。",
      "offline-edge-faq-2": "按钮灰色？确保已打开「开发者模式 / 开发人员模式」。",
      "offline-edge-faq-3": "升级后报版本冲突？先移除旧版本再重新加载新文件夹。",
      "offline-check-title": "快速核对",
      "offline-check-1": "ZIP 已解压到本地，并且选择的是解压后的文件夹。",
      "offline-check-2": "浏览器扩展页已开启「开发者模式」。",
      "offline-check-3": "安装后可在设置里填入你的 LLM Endpoint + API Key 完成配置。",
    },
    en: {
      "offline-page-title": "BlackEagle — Offline ZIP Install Guide",
      "offline-meta-description": "How to install the BlackEagle extension offline via ZIP in Chrome / Edge.",
      "page-title": "BlackEagle — Your Personal AI Browser",
      "meta-description": "BlackEagle extension: Free, local-first, no server, privacy-first. Let AI browse like a human — understand pages and act.",
      "nav-features": "Features",
      "nav-scenes": "Use Cases",
      "nav-download": "Download",
      "hero-title": "Your Personal AI Browser",
      "hero-sub": "Free · Local-first · No server · Privacy-first",
      "hero-desc": "Let AI browse like a human — understand pages and take actions. Install to get your personal AI browser.",
      "cta-chrome": "Download for Chrome",
      "cta-edge": "Download for Edge",
      "badge-1": "Local-first",
      "badge-2": "Multi-model",
      "badge-3": "Multimodal Understanding",
      "features-title": "Key Features",
      "features-local-title": "Local-only Execution",
      "features-local-desc": "No third-party relay for content or actions. Your data stays with you.",
      "features-free-title": "Free, Ready to Use",
      "features-free-desc": "Install and start with core capabilities to validate real value.",
      "features-noserver-title": "No Server Needed",
      "features-noserver-desc": "No backend, no scraping code — AI completes tasks directly in the browser.",
      "features-model-title": "Bring Your Own Model",
      "features-model-desc": "Plug in your LLM Endpoint + API Key for flexible, low-cost control.",
      "features-ops-title": "Read & Operate",
      "features-ops-desc": "Read pages and selections, auto click/fill/navigate — complete multi-step flows.",
      "features-multimodal-title": "Multimodal Support",
      "features-multimodal-desc": "Understand videos, images, and documents; produce structured results.",
      "scenes-title": "Use Cases",
      "scenes-research-title": "Market Research",
      "scenes-research-desc": "Open sites and extract key info; summarize prices, features, and updates.",
      "scenes-content-title": "Content Creation",
      "scenes-content-desc": "Turn references into originals; merge multiple pages into deep articles; parse video/image posts.",
      "scenes-commerce-title": "E‑commerce & Ops",
      "scenes-commerce-desc": "Analyze reviews, compare competitors, auto publish. If you can click it, AI can too.",
      "download-title": "Download & Install",
      "download-desc": "Supports Chrome and Edge. Download from GitHub Releases.",
      "chrome-setup-title": "Chrome Setup:",
      "chrome-step1": 'Open chrome://extensions and enable "Developer mode".',
      "chrome-step2": 'Click "Load unpacked" and choose the extracted plugin folder.',
      "edge-setup-title": "Edge Setup:",
      "edge-step1": 'Open edge://extensions and enable "Developer mode".',
      "edge-step2": 'Click "Load unpacked" and choose the extracted plugin folder.',
      tips: "Tip: Use your own LLM Endpoint + API Key for faster, safer, more personalized experience.",
      toggle: "中文",
      "download-cta-chrome": "Download for Chrome",
      "download-cta-edge": "Download for Edge",
      "download-offline-zip": "Offline Install (ZIP)",
      "footer-feedback": "GitHub Feedback",
      "footer-tutorial": "Setup Guide",
      "footer-feature": "Feature Demo",
      "nav-home": "Home",
      "offline-footer-home": "Back to Home",
      "tutorial-hero-title": "DeepSeek Setup Guide",
      "tutorial-hero-desc": "Follow these steps to get an API key and configure basic chat in BlackEagle.",
      "tutorial-apply-title": "1. Get a DeepSeek API Key",
      "tutorial-apply-step1": "Visit the DeepSeek developer portal, sign up and sign in.",
      "tutorial-apply-step2": "Open the ‘API Keys’ page, create a new key.",
      "tutorial-apply-step3": "Copy and store the key securely for BlackEagle model config.",
      "tutorial-endpoint-title": "Common Endpoint Example",
      "tutorial-endpoint-desc": "Example: https://api.deepseek.com/v1 (check official docs for accuracy)",
      "tutorial-config-title": "2. Configure in BlackEagle",
      "tutorial-config-step1": "Open the plugin sidebar → Settings / Model Config.",
      "tutorial-config-step2": "Fill Endpoint, choose a model (e.g., deepseek-chat), paste the API Key.",
      "tutorial-config-step3": "Save, then type ‘Hello’ in the chat to test.",
      "tutorial-faq-title": "FAQ",
      "tutorial-faq-1": "Connection issues? Check endpoint, key validity, and any proxy restrictions.",
      "tutorial-faq-2": "Slow responses? Lower temperature, pick a faster model, or trim prompts.",
      "tutorial-back-home": "Back to Home",
      "feature-hero-title": "Auto Read & Fill Web Forms",
      "feature-hero-desc": "BlackEagle understands page semantics and field structure, then automates clicks, fills, and navigations across multi‑step flows.",
      "feature-video-title": "Auto Fill & Operate Web Pages",
      "feature-video-desc": "Shows auto understanding and filling: detects field semantics, validates constraints, and completes fill-and-submit step by step.",
      "feature-video2-title": "Explain Hard-to-Understand Content",
      "feature-video2-desc": "Clarifies complex or technical page content and surfaces key takeaways.",
      "feature-video3-title": "Auto-write Articles and Export",
      "feature-video3-desc": "Drafts articles from page content, organizes them, and exports to documents for further editing or sharing.",
      "feature-video4-title": "Summarize Large Local PDFs",
      "feature-video4-desc": "Parses and summarizes large PDFs locally, surfacing key points while keeping data on your device.",
      "feature-video5-title": "Read & Summarize Local / Online Videos",
      "feature-video5-desc": "Handle local files or online videos: extract key points, read captions, and generate full articles.",
      "feature-video6-title": "Read and Process Emails",
      "feature-video6-desc": "Read your emails, identify tasks, handle them; parse images/resources in emails and generate replies or summaries.",
      "feature-video7-title": "Select & Interpret Page Content",
      "feature-video7-desc": "Select content on the target page; AI interprets instantly, extracts key points, and can extend to summaries or action items.",
      "feature-video8-title": "Task Reminders and To-Dos",
      "feature-video8-desc": "Create custom reminders; while you work, AI remembers and notifies you on time, combining page actions and content understanding.",
      "feature-video9-title": "Turn Page Content into Images",
      "feature-video9-desc": "Truly reads page content (not screenshots) to generate 4-panel comics, illustrations, or varied image styles (demo video coming soon).",
      "feature-steps-title": "How It Works",
      "feature-step1": "Open the plugin sidebar on the target page and select ‘Read Page’.",
      "feature-step2": "Select or specify form areas and fields so AI can infer meanings and constraints.",
      "feature-step3": "Describe the data in chat or import from docs/data, then run ‘Auto Fill’.",
      "feature-step4": "For multi‑step flows (login, navigate, submit), use a workflow to sequence actions.",
      "feature-tips-title": "Tips",
      "feature-tips-desc": "For complex forms, run in steps; add markers to key elements to improve accuracy.",
      "offline-hero-title": "Chrome / Edge Offline Install (ZIP)",
      "offline-hero-desc": "Skip the store: download BlackEagle.zip, extract it, and load the unpacked extension in your browser.",
      "offline-cta-download": "Download BlackEagle.zip",
      "offline-cta-back": "Back to Home",
      "offline-chrome-title": "Chrome Steps (ZIP)",
      "offline-chrome-step1": "Download and extract BlackEagle.zip to any local folder.",
      "offline-chrome-step2": "Open chrome://extensions and enable Developer Mode.",
      "offline-chrome-step3": "Click Load unpacked and choose the extracted folder.",
      "offline-chrome-step4": "After loading, pin BlackEagle to the toolbar for quick access.",
      "offline-chrome-update-title": "Update to a New Version",
      "offline-chrome-update-desc": "Download the new ZIP, extract to a new folder, remove the old version on the extensions page, then load the new folder.",
      "offline-edge-title": "Edge Steps (ZIP)",
      "offline-edge-step1": "Download and extract BlackEagle.zip.",
      "offline-edge-step2": "Open edge://extensions and enable Developer Mode.",
      "offline-edge-step3": "Click Load unpacked and choose the extracted folder.",
      "offline-edge-step4": "Pin BlackEagle to the toolbar after installation for quick use.",
      "offline-edge-faq-title": "FAQ",
      "offline-edge-faq-1": "Load failed? Make sure you select the root of the extracted folder.",
      "offline-edge-faq-2": "Button is disabled? Ensure Developer Mode is turned on.",
      "offline-edge-faq-3": "Version conflict after upgrade? Remove the old version first, then load the new folder.",
      "offline-check-title": "Quick Checklist",
      "offline-check-1": "ZIP is extracted locally, and you pick the extracted folder.",
      "offline-check-2": "Developer Mode is enabled on the extensions page.",
      "offline-check-3": "After installing, enter your LLM Endpoint + API Key in settings to finish setup.",
    },
  };

  function applyLang(lang) {
    const t = dict[lang] || dict.en;
    const page = (document.body && document.body.dataset && document.body.dataset.page) || "main";
    const titleKey = t[`${page}-page-title`] ? `${page}-page-title` : "page-title";
    const descKey = t[`${page}-meta-description`] ? `${page}-meta-description` : "meta-description";
    document.documentElement.lang = lang === "zh" ? "zh-CN" : "en";
    document.title = t[titleKey] || document.title;
    const metaDesc = document.querySelector('meta[name="description"]');
    if (metaDesc) metaDesc.setAttribute("content", t[descKey] || metaDesc.getAttribute("content") || "");
    [
      "nav-features",
      "nav-scenes",
      "nav-download",
      "hero-title",
      "hero-sub",
      "hero-desc",
      "cta-chrome",
      "cta-edge",
      "download-cta-chrome",
      "download-cta-edge",
      "download-offline-zip",
      "badge-1",
      "badge-2",
      "badge-3",
      "features-title",
      "features-local-title",
      "features-local-desc",
      "features-free-title",
      "features-free-desc",
      "features-noserver-title",
      "features-noserver-desc",
      "features-model-title",
      "features-model-desc",
      "features-ops-title",
      "features-ops-desc",
      "features-multimodal-title",
      "features-multimodal-desc",
      "scenes-title",
      "scenes-research-title",
      "scenes-research-desc",
      "scenes-content-title",
      "scenes-content-desc",
      "scenes-commerce-title",
      "scenes-commerce-desc",
      "download-title",
      "download-desc",
      "chrome-setup-title",
      "chrome-step1",
      "chrome-step2",
      "edge-setup-title",
      "edge-step1",
      "edge-step2",
      "tips",
      "footer-feedback",
      "footer-tutorial",
      "footer-feature",
      "nav-home",
      "feature-hero-title",
      "feature-hero-desc",
      "feature-video-title",
      "feature-video-desc",
      "feature-steps-title",
      "feature-step1",
      "feature-step2",
      "feature-step3",
      "feature-step4",
      "feature-tips-title",
      "feature-tips-desc",
      "feature-video2-title",
      "feature-video2-desc",
      "feature-video3-title",
      "feature-video3-desc",
      "feature-video4-title",
      "feature-video4-desc",
      "feature-video5-title",
      "feature-video5-desc",
      "feature-video6-title",
      "feature-video6-desc",
      "feature-video7-title",
      "feature-video7-desc",
      "feature-video8-title",
      "feature-video8-desc",
      "feature-video9-title",
      "feature-video9-desc",
      "tutorial-hero-title",
      "tutorial-hero-desc",
      "tutorial-apply-title",
      "tutorial-apply-step1",
      "tutorial-apply-step2",
      "tutorial-apply-step3",
      "tutorial-endpoint-title",
      "tutorial-endpoint-desc",
      "tutorial-config-title",
      "tutorial-config-step1",
      "tutorial-config-step2",
      "tutorial-config-step3",
      "tutorial-faq-title",
      "tutorial-faq-1",
      "tutorial-faq-2",
      "tutorial-back-home",
      "offline-hero-title",
      "offline-hero-desc",
      "offline-cta-download",
      "offline-cta-back",
      "offline-chrome-title",
      "offline-chrome-step1",
      "offline-chrome-step2",
      "offline-chrome-step3",
      "offline-chrome-step4",
      "offline-chrome-update-title",
      "offline-chrome-update-desc",
      "offline-edge-title",
      "offline-edge-step1",
      "offline-edge-step2",
      "offline-edge-step3",
      "offline-edge-step4",
      "offline-edge-faq-title",
      "offline-edge-faq-1",
      "offline-edge-faq-2",
      "offline-edge-faq-3",
      "offline-check-title",
      "offline-check-1",
      "offline-check-2",
      "offline-check-3",
      "offline-footer-home",
    ].forEach(function (id) {
      var el = document.getElementById(id);
      if (el && t[id]) el.textContent = t[id];
    });
    var toggle = document.getElementById("lang-toggle");
    if (toggle) toggle.textContent = t["toggle"];
  }

  function setLang(lang) {
    try {
      localStorage.setItem("beLang", lang);
    } catch {}
    applyLang(lang);
  }

  document.addEventListener("DOMContentLoaded", function () {
    var current = detectLang();
    applyLang(current);
    var toggle = document.getElementById("lang-toggle");
    if (toggle) {
      toggle.addEventListener("click", function (e) {
        e.preventDefault();
        current = current === "zh" ? "en" : "zh";
        setLang(current);
      });
    }
  });
})();
